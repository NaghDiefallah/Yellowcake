<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:Yellowcake.ViewModels"
             x:Class="Yellowcake.Views.SettingsView"
             x:DataType="vm:MainViewModel">
    <ScrollViewer Padding="0,0,16,0">
        <StackPanel Spacing="24" Margin="4,12">
			<StackPanel Spacing="4">
				<TextBlock Text="SETTINGS" FontSize="28" FontWeight="Black" Foreground="{DynamicResource SystemAccentBrush}" LetterSpacing="2"/>
				<TextBlock Text="Manage your application behavior and mod preferences" FontSize="13" Opacity="0.6"/>
			</StackPanel>
            <StackPanel Spacing="8">
                <TextBlock Text="General Preferences" FontWeight="Bold" FontSize="16" Foreground="{DynamicResource MainTextBrush}" Margin="4,0"/>
                <Border Background="{DynamicResource SettingsGroupBg}" CornerRadius="8" Padding="16" BorderBrush="{DynamicResource BorderBrush}" BorderThickness="1">
                    <StackPanel Spacing="16">
                        <Grid ColumnDefinitions="*, Auto">
                            <StackPanel Spacing="2">
                                <TextBlock Text="Auto-Update Mods" FontWeight="SemiBold"/>
                                <TextBlock Text="Sync installed mods with latest versions on startup" FontSize="11" Foreground="{DynamicResource SubTextBrush}"/>
                            </StackPanel>
                            <ToggleSwitch Grid.Column="1" IsChecked="{Binding AutoUpdateMods}" Theme="{StaticResource FluentToggleSwitchTheme}"/>
                        </Grid>
						<Grid ColumnDefinitions="*, Auto">
							<StackPanel Spacing="2">
								<TextBlock Text="Use Backup Manifest" FontWeight="SemiBold"/>
								<TextBlock Text="Use the secondary manifest, only use this in the case of the primary manifest failing." FontSize="11" Foreground="{DynamicResource SubTextBrush}"/>
							</StackPanel>
							<ToggleSwitch Grid.Column="1" IsChecked="{Binding UseSecondaryManifest}" Theme="{StaticResource FluentToggleSwitchTheme}"/>
						</Grid>
						<Grid ColumnDefinitions="*, Auto">
							<StackPanel Spacing="2">
								<TextBlock Text="System Tray" FontWeight="SemiBold"/>
								<TextBlock Text="Keep manager running in background when closed" FontSize="11" Foreground="{DynamicResource SubTextBrush}"/>
							</StackPanel>
							<ToggleSwitch Grid.Column="1" IsChecked="{Binding MinimizeToTray}" Theme="{StaticResource FluentToggleSwitchTheme}"/>
						</Grid>
                    </StackPanel>
                </Border>
            </StackPanel>

            <StackPanel Spacing="8">
                <TextBlock Text="Interface" FontWeight="Bold" FontSize="16" Foreground="{DynamicResource MainTextBrush}" Margin="4,0"/>
                <Border Background="{DynamicResource SettingsGroupBg}" CornerRadius="8" Padding="16" BorderBrush="{DynamicResource BorderBrush}" BorderThickness="1">
                    <Grid ColumnDefinitions="*, Auto">
                        <StackPanel Spacing="2">
                            <TextBlock Text="Active Theme" FontWeight="SemiBold"/>
                            <StackPanel Orientation="Horizontal" Spacing="8" Margin="0,4">
                                <Button Command="{Binding RefreshThemesCommand}" Content="Reload" FontSize="11" Classes="Tonal"/>
                                <Button Command="{Binding OpenThemesFolderCommand}" Content="Themes Folder" FontSize="11" Classes="Tonal"/>
                            </StackPanel>
                        </StackPanel>
                        <ComboBox Grid.Column="1" ItemsSource="{Binding AvailableThemes}" SelectedItem="{Binding SelectedTheme}" Width="180"/>
                    </Grid>
                </Border>
            </StackPanel>

			<StackPanel Spacing="12">
				<TextBlock Text="Configuration &amp; Mod Sharing"
						   FontWeight="SemiBold"
						   FontSize="13"
						   Opacity="0.5"
						   Foreground="{DynamicResource MainTextBrush}"
						   Margin="4,0"/>

				<Border Background="{DynamicResource CardBackgroundBrush}"
						CornerRadius="12"
						BorderBrush="{DynamicResource BorderBrush}"
						BorderThickness="1"
						ClipToBounds="True">
					<StackPanel>
						<Border Padding="20,16">
							<StackPanel Spacing="12">
								<StackPanel Orientation="Horizontal" Spacing="8">
									<PathIcon Data="{StaticResource ShareIcon}" Width="12" Height="12"
											  Foreground="{DynamicResource SystemAccentBrush}" Opacity="0.8"/>
									<TextBlock Text="Quick Sync" FontSize="14" FontWeight="SemiBold"/>
								</StackPanel>

								<Grid ColumnDefinitions="*, Auto">
									<TextBox Text="{Binding SettingsShareCode}"
											 Watermark="Enter or paste a sync code..."
											 Height="40"
											 VerticalContentAlignment="Center"
											 CornerRadius="8,0,0,8"
											 BorderBrush="{DynamicResource BorderBrush}"
											 BorderThickness="1,1,0,1"
											 Padding="12,0"/>

									<Button Grid.Column="1"
											Content="Apply"
											Command="{Binding ApplyShareCodeCommand}"
											Classes="Filled"
											Height="40"
											Padding="24,0"
											CornerRadius="0,8,8,0"
											VerticalAlignment="Stretch"
											VerticalContentAlignment="Center"/>
								</Grid>

								<DockPanel LastChildFill="True">
									<Button DockPanel.Dock="Right"
											Command="{Binding GenerateShareCodeCommand}"
											Classes="Link"
											Padding="0"
											Height="20"
											MinHeight="0"
											VerticalAlignment="Center">
										<StackPanel Orientation="Horizontal" Spacing="4">
											<TextBlock Text="Generate my own code"
													   FontSize="11"
													   FontWeight="Medium"
													   Foreground="{DynamicResource SystemAccentBrush}"/>
											<PathIcon Data="{StaticResource ChevronRightIcon}"
													  Width="8" Height="8"
													  Foreground="{DynamicResource SystemAccentBrush}"
													  Opacity="0.8"/>
										</StackPanel>
									</Button>

									<TextBlock Text="Match your library to a shared configuration."
											   FontSize="11"
											   Opacity="0.5"
											   VerticalAlignment="Center"
											   TextWrapping="Wrap"
											   Margin="0,0,12,0"/>
								</DockPanel>
							</StackPanel>
						</Border>

						<Separator Height="1" Background="{DynamicResource BorderBrush}" Opacity="0.3" Margin="0"/>

						<Grid ColumnDefinitions="*, 1, *">
							<Button Grid.Column="0"
									Command="{Binding ExportModListCommand}"
									Background="Transparent"
									BorderThickness="0"
									HorizontalAlignment="Stretch"
									VerticalAlignment="Stretch"
									Height="54"
									CornerRadius="0">
								<Button.Styles>
									<Style Selector="Button:pointerover /template/ ContentPresenter">
										<Setter Property="Background" Value="#0AFFFFFF"/>
									</Style>
								</Button.Styles>
								<StackPanel Orientation="Horizontal" Spacing="10" HorizontalAlignment="Center">
									<PathIcon Data="{StaticResource ExportIcon}" Width="14" Height="14"
											  Foreground="{DynamicResource SystemAccentBrush}"/>
									<TextBlock Text="Backup List" FontWeight="Medium" FontSize="13"/>
								</StackPanel>
							</Button>

							<Rectangle Grid.Column="1" Width="1" Height="20"
									   Fill="{DynamicResource BorderBrush}" Opacity="0.3"
									   VerticalAlignment="Center"/>

							<Button Grid.Column="2"
									Command="{Binding ImportModListCommand}"
									Background="Transparent"
									BorderThickness="0"
									HorizontalAlignment="Stretch"
									VerticalAlignment="Stretch"
									Height="54"
									CornerRadius="0">
								<Button.Styles>
									<Style Selector="Button:pointerover /template/ ContentPresenter">
										<Setter Property="Background" Value="#0AFFFFFF"/>
									</Style>
								</Button.Styles>
								<StackPanel Orientation="Horizontal" Spacing="10" HorizontalAlignment="Center">
									<PathIcon Data="{StaticResource ImportIcon}" Width="14" Height="14"
											  Foreground="{DynamicResource SystemAccentBrush}"/>
									<TextBlock Text="Restore Backup" FontWeight="Medium" FontSize="13"/>
								</StackPanel>
							</Button>
						</Grid>
					</StackPanel>
				</Border>
			</StackPanel>

            <StackPanel Spacing="8">
                <TextBlock Text="Utility Tools" FontWeight="Bold" FontSize="16" Foreground="{DynamicResource MainTextBrush}" Margin="4,0"/>
                <Border Background="{DynamicResource SettingsGroupBg}" CornerRadius="8" Padding="16" BorderBrush="{DynamicResource BorderBrush}" BorderThickness="1">
                    <UniformGrid Columns="2" Rows="2">
                        <Button Margin="4" Command="{Binding CreateShortcutCommand}" Classes="Tonal" HorizontalAlignment="Stretch">
                            <StackPanel Orientation="Horizontal" Spacing="8"><PathIcon Data="{StaticResource PlusIcon}" Width="13" Height="13"/><TextBlock Text="Create Desktop Shortcut" VerticalAlignment="Center"/></StackPanel>
                        </Button>
                        <Button Margin="4" Command="{Binding OpenModFolderCommand}" Classes="Tonal" HorizontalAlignment="Stretch">
                            <StackPanel Orientation="Horizontal" Spacing="8"><PathIcon Data="{StaticResource FolderIcon}" Width="13" Height="13"/><TextBlock Text="Open Mods Folder" VerticalAlignment="Center"/></StackPanel>
                        </Button>
                        <Button Margin="4" Command="{Binding UpdateAllModsCommand}" Classes="Tonal" HorizontalAlignment="Stretch">
                            <StackPanel Orientation="Horizontal" Spacing="8"><PathIcon Data="{StaticResource RefreshIcon}" Width="13" Height="13"/><TextBlock Text="Sync With Server" VerticalAlignment="Center"/></StackPanel>
                        </Button>
                        <Button Margin="4" Command="{Binding UninstallBepInExCommand}" Classes="Tonal" HorizontalAlignment="Stretch" Foreground="{DynamicResource WarningBrush}">
                            <StackPanel Orientation="Horizontal" Spacing="8"><PathIcon Data="{StaticResource DeleteIcon}" Width="13" Height="13"/><TextBlock Text="Uninstall BepInEx" VerticalAlignment="Center"/></StackPanel>
                        </Button>
                    </UniformGrid>
                </Border>
            </StackPanel>

			<StackPanel Spacing="8">
				<TextBlock Text="BepInEx Management" FontWeight="Bold" FontSize="16" Foreground="{DynamicResource MainTextBrush}" Margin="4,0"/>
				<Border Background="{DynamicResource SettingsGroupBg}" CornerRadius="8" Padding="16" BorderBrush="{DynamicResource BorderBrush}" BorderThickness="1">
					<Grid ColumnDefinitions="*, Auto" Margin="4">
						<StackPanel Spacing="6">
							<TextBlock Text="VERSION"
									   FontSize="10"
									   FontWeight="Black"
									   Opacity="0.5"
									   LetterSpacing="1"/>
							<ComboBox ItemsSource="{Binding BepInExVersions}"
									  SelectedItem="{Binding SelectedBepInExVersion}"
									  HorizontalAlignment="Stretch"
									  VerticalAlignment="Center"
									  PlaceholderText="Select Version..."
									  Margin="0,0,12,0" />
						</StackPanel>

						<Button Grid.Column="1"
								Command="{Binding InstallSelectedBepInExCommand}"
								Classes="Filled"
								HorizontalAlignment="Stretch"
								VerticalAlignment="Center"
								Content="INSTALL"
								Height="42"
								Padding="24,0"/>
					</Grid>
				</Border>
			</StackPanel>

            <StackPanel Spacing="4" HorizontalAlignment="Center" Opacity="0.4" Margin="0,0,0,20">
                <TextBlock Text="{Binding AppVersion}" FontSize="11" HorizontalAlignment="Center"/>
                <TextBlock Text="Yellowcake Mod Manager â€¢ NaghDiefallah" FontSize="10" HorizontalAlignment="Center"/>
            </StackPanel>
        </StackPanel>
    </ScrollViewer>
</UserControl>